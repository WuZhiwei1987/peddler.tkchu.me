<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">

    <title>升级你的《货郎》到最新版本！</title>
  </head>
  <body>
    <h1>升级你的《货郎》到最新版本！</h1>
    <h2 id="versionText">现在最新的版本是{version}</h2>
    <div id="NeedUpdate">你的版本不是最新的，<a href="/peddler.zip">点击这里</a>获得最新版本！</div>
    <div id="NoNeedUpdate">恭喜，你的版本是最新的！</div>
    <p>注意，游戏仍处于开发之中，未经过完全测试，不能保证顺畅运行。</p>

    <h3>变动列表</h3>
    <h4>0.0.5</h4>
    <ul>
      <li>基本的游戏循环完成。</li>
    </ul>
    
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.bootcss.com/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.bootcss.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>

    <script type="text/javascript">
      var getUrlParameter = function getUrlParameter(sParam) {
        var sPageURL = decodeURIComponent(window.location.search.substring(1)),
            sURLVariables = sPageURL.split('&'),
            sParameterName,
            i;

        for (i = 0; i < sURLVariables.length; i++) {
            sParameterName = sURLVariables[i].split('=');

            if (sParameterName[0] === sParam) {
                return sParameterName[1] === undefined ? true : sParameterName[1];
            }
        }
      };
      var compareVersionNum = function compareVersionNum(version1, version2){
        var v1 = version1.split('.');
        var v2 = version2.split('.');
        for (var i = 0; i < v1.length; i++) {
          if(v1[i] > v2[i])return 1;
          else if(v1[i] < v2[i])return -1;
        }
        return 0;
      }
      $(document).ready(function() {
        var version1 = "0.0.5";
        $("#versionText").text($("#versionText").text().replace("{version}", version1))
        var version2 = getUrlParameter("version");
        if(compareVersionNum(version1,version2) > 0){
          $("#NoNeedUpdate").hide();
        }else{
          $("#NeedUpdate").hide();
        }
      });
    </script>
  </body>
</html>